@import LunchManCore.FridayLunch
@import LunchManCore.Restaurant

@import LunchManCore.Employee

@(message: String, lunches: List[FridayLunch], restaurants: List[Restaurant], employees: List[Employee])

@main(message) {
    <h1>@message&trade;</h1>
    @for((lunch, index) <- lunches.zipWithIndex) {
        @lunch.getDate
        <h2>@lunch.getApprentice.get().getName</h2>
        <form METHOD="post" action="/changeapprentice">
            <input type="hidden" placeholder="Week Num." value="@index" name="position"/>
            <input type="text" placeholder="New Apprentice Name" name="newName"/>
            <input type="submit"/>
        </form>
        <br>
    }

    <section>
    @if(!lunches.get(0).getRestaurant.isPresent) {
        Please choose a menu:
        <form id="restaurants" METHOD="post" action="/assignrestaurant">
            <select name="restaurant" form="restaurants">
            @for((restaurant, index) <- restaurants.zipWithIndex) {
                <option value="@index">@restaurant.getName</option>
            }
            </select>
            <input type="submit"/>
        </form>
    } else {
        @lunches.get(0).getRestaurant.get().getName
        <a href="@lunches.get(0).getRestaurant.get().getMenuLink">Menu</a>
    }
    </section>

    <section id="ordersSection">
    @if(lunches.get(0).getRestaurant.isPresent) {
        Please add your order:
        @for((employee, index) <- employees.zipWithIndex) {
            @if(employee.getOrder.isPresent) {
                @employee.getName @employee.getOrder.get()
            } else {
                <form id="orders" METHOD="post" action="/newOrder">
                    <label type="text">@employee.getName</label>
                    <input type="hidden" value="@index" name="name"/>
                    <input type="text" placeholder="Order" name="order"/>
                    <input type="submit"/>
                </form>
            }
        }
    }
    </section>
}
